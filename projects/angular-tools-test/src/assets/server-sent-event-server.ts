import express from 'express';
import { IncomingMessage, Server, ServerResponse } from 'http';
import cors from 'cors';

const app = express();
app.use(cors());
const server = new Server(app);

app.get('/events', (req: IncomingMessage, res: ServerResponse): void => {
  res.setHeader('Content-Type', 'text/event-stream');
  res.setHeader('Cache-Control', 'no-cache');
  res.setHeader('Connection', 'keep-alive');
  const imageBase64 =
    'data:image/png;base64,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';

  const data = {
    message: 'Hello, world!',
    image: imageBase64
  };

  const message: string = `event: message\ndata: ${JSON.stringify(data)}\n\n`;

  setInterval((): void => {
    res.write(message);
  }, 5000);
});

const port = 3000;
server.listen(port, () => {
  console.log(`Server is running on http://localhost:${port}`);
});
